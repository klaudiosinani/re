pre.highlight {
  font-family: "JetBrains Mono", monospace !important;
  background: var(--codeblock-color-background) !important;
  color: var(--codeblock-color-text) !important;
  border-color: rgb(var(--color-border)) !important;
  border-radius: 0.25rem;
  overflow: auto;
  font-size: 1em;
  line-height: 1.5;
  display: block;
  width: 100%;
}

/* Apply Dark Theme */
html[data-theme="dark"] pre.highlight {
  background: var(--codeblock-color-background) !important;
  color: var(--codeblock-color-text) !important;
  border-color: rgb(var(--color-border)) !important;
}

pre.highlight span {
  color: var(--codeblock-color-text);
}

html[data-theme="dark"] pre.highlight span {
  color: var(--codeblock-color-text);
}

/* Keywords */
pre.highlight .k,
pre.highlight .kd,
pre.highlight .kn,
pre.highlight .kp,
pre.highlight .kr,
pre.highlight .kt {
  color: var(--codeblock-token-keyword);
}
html[data-theme="dark"] pre.highlight .k,
html[data-theme="dark"] pre.highlight .kd,
html[data-theme="dark"] pre.highlight .kn,
html[data-theme="dark"] pre.highlight .kp,
html[data-theme="dark"] pre.highlight .kr,
html[data-theme="dark"] pre.highlight .kt {
  color: var(--codeblock-token-keyword);
}

/* Strings */
pre.highlight .s,
pre.highlight .sa,
pre.highlight .sb,
pre.highlight .sc,
pre.highlight .dl,
pre.highlight .sd,
pre.highlight .s2,
pre.highlight .sh,
pre.highlight .sx,
pre.highlight .s1,
pre.highlight .sr {
  color: var(--codeblock-token-string);
}

html[data-theme="dark"] pre.highlight .s,
html[data-theme="dark"] pre.highlight .sa,
html[data-theme="dark"] pre.highlight .sb,
html[data-theme="dark"] pre.highlight .sc,
html[data-theme="dark"] pre.highlight .dl,
html[data-theme="dark"] pre.highlight .sd,
html[data-theme="dark"] pre.highlight .s2,
html[data-theme="dark"] pre.highlight .sh,
html[data-theme="dark"] pre.highlight .sx,
html[data-theme="dark"] pre.highlight .s1,
html[data-theme="dark"] pre.highlight .sr {
  color: var(--codeblock-token-string);
}

/* Numbers and constants */
pre.highlight .m,
pre.highlight .mb,
pre.highlight .mf,
pre.highlight .mh,
pre.highlight .mi,
pre.highlight .mo,
pre.highlight .il,
pre.highlight .no {
  color: var(--codeblock-token-constant);
}

html[data-theme="dark"] pre.highlight .m,
html[data-theme="dark"] pre.highlight .mb,
html[data-theme="dark"] pre.highlight .mf,
html[data-theme="dark"] pre.highlight .mh,
html[data-theme="dark"] pre.highlight .mi,
html[data-theme="dark"] pre.highlight .mo,
html[data-theme="dark"] pre.highlight .il,
html[data-theme="dark"] pre.highlight .no {
  color: var(--codeblock-token-constant);
}

/* Functions and methods */
pre.highlight .na,
pre.highlight .nb,
pre.highlight .nc,
pre.highlight .nf,
pre.highlight .fm {
  color: var(--codeblock-token-function);
}
html[data-theme="dark"] pre.highlight .na,
html[data-theme="dark"] pre.highlight .nb,
html[data-theme="dark"] pre.highlight .nc,
html[data-theme="dark"] pre.highlight .nf,
html[data-theme="dark"] pre.highlight .fm {
  color: var(--codeblock-token-function);
}

/* Comments */
pre.highlight .c,
pre.highlight .ch,
pre.highlight .cm,
pre.highlight .cp,
pre.highlight .cpf,
pre.highlight .c1,
pre.highlight .cs {
  color: var(--codeblock-token-comment);
  font-style: italic;
}
html[data-theme="dark"] pre.highlight .c,
html[data-theme="dark"] pre.highlight .ch,
html[data-theme="dark"] pre.highlight .cm,
html[data-theme="dark"] pre.highlight .cp,
html[data-theme="dark"] pre.highlight .cpf,
html[data-theme="dark"] pre.highlight .c1,
html[data-theme="dark"] pre.highlight .cs {
  color: var(--codeblock-token-comment);
}

/* Operators, punctuation */
pre.highlight .o,
pre.highlight .ow,
pre.highlight .p {
  color: var(--codeblock-token-punctuation);
}
html[data-theme="dark"] pre.highlight .o,
html[data-theme="dark"] pre.highlight .ow,
html[data-theme="dark"] pre.highlight .p {
  color: var(--codeblock-token-punctuation);
}

/* Variables */
pre.highlight .n,
pre.highlight .nv,
pre.highlight .vc,
pre.highlight .vg,
pre.highlight .vi,
pre.highlight .vm {
  color: var(--codeblock-color-text);
}
html[data-theme="dark"] pre.highlight .n,
html[data-theme="dark"] pre.highlight .nv,
html[data-theme="dark"] pre.highlight .vc,
html[data-theme="dark"] pre.highlight .vg,
html[data-theme="dark"] pre.highlight .vi,
html[data-theme="dark"] pre.highlight .vm {
  color: var(--codeblock-color-text);
}

/* Code block selection - optional override */
pre.highlight ::selection {
  background-color: rgba(var(--color-selection-bg), 0.7);
  color: rgb(var(--color-selection-text));
}

pre.highlight ::-moz-selection {
  background-color: rgb(var(--color-selection-bg), 0.7);
  color: rgb(var(--color-selection-text));
}